import{r as n,j as e,S as O,y as N}from"./app-By9T3_hT.js";import{C as $,a as F}from"./card-CSknuUnI.js";import{T as M,a as q,b as y,c as g,d as z,e as m}from"./table-M1DGgy18.js";import{B as V}from"./badge-hluCmU2h.js";import{m as W,k as X,i as G,D as J,E as K,x as Q}from"./navbar-CwT8qYnT.js";import{C as E,A as Y,E as Z,a as ee,S as te}from"./react-icons.esm-DL-rYN1D.js";import{k as se,u as ae,S as re,e as ne,g as ce,i as ie,j as T}from"./select-T4vt2RfK.js";import{S as oe,u as le,c as P,B as C}from"./index-BnX6mjkZ.js";import{D as de,b as ue,c as he,d as xe,e as me}from"./dialog-CPdFLB40.js";import{L as fe}from"./Layout-B2cxh-r7.js";var ge=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],U=ge.reduce((r,c)=>{const s=n.forwardRef((i,o)=>{const{asChild:x,...l}=i,d=x?oe:c;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...l,ref:o})});return s.displayName=`Primitive.${c}`,{...r,[c]:s}},{}),k="Switch",[pe,Re]=X(k),[be,je]=pe(k),A=n.forwardRef((r,c)=>{const{__scopeSwitch:s,name:i,checked:o,defaultChecked:x,required:l,disabled:d,value:u="on",onCheckedChange:b,form:j,...h}=r,[p,D]=n.useState(null),S=le(c,f=>D(f)),w=n.useRef(!1),v=p?j||!!p.closest("form"):!0,[t=!1,a]=W({prop:o,defaultProp:x,onChange:b});return e.jsxs(be,{scope:s,checked:t,disabled:d,children:[e.jsx(U.button,{type:"button",role:"switch","aria-checked":t,"aria-required":l,"data-state":B(t),"data-disabled":d?"":void 0,disabled:d,value:u,...h,ref:S,onClick:G(r.onClick,f=>{a(L=>!L),v&&(w.current=f.isPropagationStopped(),w.current||f.stopPropagation())})}),v&&e.jsx(we,{control:p,bubbles:!w.current,name:i,value:u,checked:t,required:l,disabled:d,form:j,style:{transform:"translateX(-100%)"}})]})});A.displayName=k;var R="SwitchThumb",I=n.forwardRef((r,c)=>{const{__scopeSwitch:s,...i}=r,o=je(R,s);return e.jsx(U.span,{"data-state":B(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:c})});I.displayName=R;var we=r=>{const{control:c,checked:s,bubbles:i=!0,...o}=r,x=n.useRef(null),l=se(s),d=ae(c);return n.useEffect(()=>{const u=x.current,b=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(b,"checked").set;if(l!==s&&h){const p=new Event("click",{bubbles:i});h.call(u,s),u.dispatchEvent(p)}},[l,s,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...o,tabIndex:-1,ref:x,style:{...r.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function B(r){return r?"checked":"unchecked"}var _=A,ve=I;const H=n.forwardRef(({className:r,...c},s)=>e.jsx(_,{className:P("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...c,ref:s,children:e.jsx(ve,{className:P("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));H.displayName=_.displayName;function Ne({setActiveSection:r,setUserData:c}){const[s,i]=n.useState([]),[o,x]=n.useState(!0),[l,d]=n.useState(null),[u,b]=n.useState(null),[j,h]=n.useState(!1),[p,D]=n.useState(null);n.useEffect(()=>{(async()=>{try{const a=await J();console.log(a),i(a.users)}catch(a){d(a.message)}finally{x(!1)}})()},[]);const S=async(t,a)=>{t==="edit"?O.visit(`/admin/user/${a.id}`):t==="delete"&&(b(a),h(!0))},w=async()=>{if(u)try{await K(u.id),i(s.filter(t=>t.id!==u.id)),N.success("User deleted successfully!")}catch(t){N.error("Failed to delete user. Try again!"),console.error("Delete error:",t)}finally{h(!1)}},v=async t=>{try{const a={...t,status:t.status==="1"?0:1};await Q(t.id,a),i(s.map(f=>f.id===t.id?a:f)),N.success(`User ${a.status===1?"activated":"deactivated"} successfully!`)}catch(a){N.error("Failed to update user status. Try again!"),console.error("Error updating user status:",a)}};return e.jsxs("div",{className:"p-6 min-h-screen",children:[e.jsx("div",{children:e.jsxs("h2",{className:"text-3xl font-bold flex items-center gap-2 text-indigo-800",children:[e.jsx(E,{className:"h-8 w-8 text-indigo-600"})," All Users"]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-4 max-w-lg border p-2 mt-4 mx-4 rounded-md bg-white shadow-sm"}),e.jsx("div",{className:"flex gap-4",children:e.jsx(C,{onClick:()=>r("add-user"),className:"bg-green-500 text-white hover:bg-green-600",children:"Add New"})})]}),e.jsx($,{className:"w-full shadow-lg rounded-xl bg-white overflow-hidden",children:e.jsx(F,{className:"p-5",children:e.jsx("div",{className:"p-6",children:l?e.jsxs(Y,{variant:"destructive",className:"mb-6 bg-red-100 border border-red-400",children:[e.jsx(Z,{className:"h-4 w-4 text-red-500"}),e.jsxs(ee,{className:"text-red-700",children:["Error loading users: ",l]})]}):o?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((t,a)=>e.jsx(te,{className:"h-12 w-full rounded-lg bg-gray-200"},a))}):e.jsx("div",{className:"border rounded-lg overflow-auto shadow-lg",children:e.jsxs(M,{className:"w-full min-w-[600px] sm:w-full",children:[e.jsx(q,{className:"bg-indigo-100",children:e.jsxs(y,{children:[e.jsx(g,{className:"text-center text-indigo-800",children:"ID"}),e.jsx(g,{className:"text-center text-indigo-800",children:"Name"}),e.jsx(g,{className:"text-center text-indigo-800",children:"Email"}),e.jsx(g,{className:"text-center text-indigo-800",children:"Role"}),e.jsx(g,{className:"text-center text-indigo-800",children:"Created At"}),e.jsx(g,{className:"text-center text-indigo-800",children:"Status"}),e.jsx(g,{className:"text-center text-indigo-800",children:"Actions"})]})}),e.jsx(z,{children:s.length>0?s.map(t=>e.jsxs(y,{className:"hover:bg-indigo-50 border-t",children:[e.jsx(m,{className:"text-center py-4",children:t.id}),e.jsx(m,{className:"text-center",children:e.jsx(V,{variant:"outline",className:"text-indigo-600",children:t.name})}),e.jsx(m,{className:"text-center",children:t.email}),e.jsx(m,{className:"text-center font-mono text-gray-600",children:t.role}),e.jsx(m,{className:"text-center text-sm text-gray-500",children:new Date(t.created_at).toLocaleString()}),e.jsx(m,{className:"text-center",children:e.jsx(H,{checked:t.status==="1",onCheckedChange:()=>{v(t)},className:`${t.status===1?"bg-green-600":"bg-red-600"} rounded-full`})}),e.jsx(m,{className:"text-center",children:e.jsxs(re,{onValueChange:a=>S(a,t),children:[e.jsx(ne,{className:"w-24 border rounded-md bg-indigo-50 text-indigo-700 mx-auto",children:e.jsx(ce,{placeholder:"Actions"})}),e.jsxs(ie,{children:[e.jsx(T,{value:"edit",children:"Edit"}),e.jsx(T,{value:"delete",children:"Delete"})]})]})})]},t.id)):e.jsx(y,{children:e.jsxs(m,{colSpan:"7",className:"h-24 text-center text-gray-500",children:[e.jsx(E,{className:"h-8 w-8 text-gray-400"}),"No users found"]})})})]})})})})}),e.jsx(de,{open:j,onOpenChange:h,children:e.jsxs(ue,{children:[e.jsx(he,{children:e.jsx(xe,{children:"Confirm Deletion"})}),e.jsxs(me,{children:[e.jsx(C,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(C,{className:"bg-red-600 text-white hover:bg-red-700",onClick:w,children:"Delete"})]})]})})]})}function Ie(){return e.jsx(fe,{children:e.jsx(Ne,{})})}export{Ie as default};

import{r as i,j as e}from"./app-By9T3_hT.js";import{L as w}from"./Layout-B2cxh-r7.js";import{W as v,X as S}from"./navbar-CwT8qYnT.js";import{B as j,c as n}from"./index-BnX6mjkZ.js";import{T as R,a as D,b as u,c as t,d as T,e as l}from"./table-M1DGgy18.js";import{B as y}from"./badge-hluCmU2h.js";import{S as C,e as E,g as B,i as L,j as c}from"./select-T4vt2RfK.js";import{D as P,a as _,b as k,c as H,d as V,f as z}from"./dialog-CPdFLB40.js";function I(){const[x,o]=i.useState([]),[b,m]=i.useState(!0),[p,h]=i.useState(null),[g,f]=i.useState(null);i.useEffect(()=>{(async()=>{try{const a=await v();o(a),m(!1)}catch(a){h(a.message),m(!1)}})()},[]);const N=async(s,a)=>{try{const r=await S(s,a);o(x.map(d=>d.id===s?{...d,status:r.status}:d))}catch(r){h(r.message)}};return b?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):p?e.jsx("div",{className:"max-w-4xl mx-auto mt-8 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:p}):e.jsxs("div",{className:"container mx-auto mt-8 px-4 sm:px-6 lg:px-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-6",children:"Support Requests"}),e.jsx("div",{className:"w-full overflow-x-auto rounded-lg border shadow-sm",children:e.jsxs(R,{className:"min-w-[640px]",children:[e.jsx(D,{children:e.jsxs(u,{children:[e.jsx(t,{className:"text-left py-3 px-4",children:"Name"}),e.jsx(t,{className:"text-left py-3 px-4 hidden sm:table-cell",children:"Email"}),e.jsx(t,{className:"text-left py-3 px-4 hidden md:table-cell",children:"Subject"}),e.jsx(t,{className:"text-left py-3 px-4",children:"Description"}),e.jsx(t,{className:"text-left py-3 px-4 hidden lg:table-cell",children:"Priority"}),e.jsx(t,{className:"text-left py-3 px-4",children:"Status"}),e.jsx(t,{className:"text-left py-3 px-4 hidden xl:table-cell",children:"Created"}),e.jsx(t,{className:"text-left py-3 px-4",children:"Actions"})]})}),e.jsx(T,{children:x.map(s=>e.jsxs(u,{className:"hover:bg-gray-50",children:[e.jsx(l,{className:"py-3 px-4 font-medium align-middle",children:s.name}),e.jsx(l,{className:"py-3 px-4 hidden sm:table-cell align-middle",children:s.email}),e.jsx(l,{className:"py-3 px-4 hidden md:table-cell align-middle",children:s.subject}),e.jsx(l,{className:"py-3 px-4 align-middle",children:e.jsxs(P,{children:[e.jsx(_,{asChild:!0,children:e.jsx(j,{variant:"link",size:"sm",className:"text-indigo-600 hover:text-indigo-900 p-0 h-auto",onClick:()=>f(s),children:"View"})}),g&&g.id===s.id&&e.jsxs(k,{className:"sm:max-w-md w-full",children:[e.jsxs(H,{children:[e.jsx(V,{children:s.subject}),e.jsxs(z,{children:["Support request details for ",s.name]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-900 w-fit flex",children:s.message})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Priority"}),e.jsx(y,{variant:"outline",className:n(s.priority==="high"&&"bg-red-100 text-red-800 border-red-200",s.priority==="medium"&&"bg-yellow-100 text-yellow-800 border-yellow-200",s.priority==="low"&&"bg-green-100 text-green-800 border-green-200"),children:s.priority})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Created"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(s.created_at).toLocaleString()})]})]})]})]})}),e.jsx(l,{className:"py-3 px-4 hidden lg:table-cell align-middle",children:e.jsx(y,{variant:"outline",className:n(s.priority==="high"&&"bg-red-100 text-red-800 border-red-200",s.priority==="medium"&&"bg-yellow-100 text-yellow-800 border-yellow-200",s.priority==="low"&&"bg-green-100 text-green-800 border-green-200"),children:s.priority})}),e.jsx(l,{className:"py-3 px-4 align-middle",children:e.jsxs(C,{value:s.status,onValueChange:a=>N(s.id,a),children:[e.jsx(E,{className:n("w-[120px] sm:w-[140px]",s.status==="pending"&&"border-yellow-500 text-yellow-700",s.status==="in_progress"&&"border-blue-500 text-blue-700",s.status==="resolved"&&"border-green-500 text-green-700"),children:e.jsx(B,{})}),e.jsxs(L,{children:[e.jsx(c,{value:"pending",children:"Pending"}),e.jsx(c,{value:"in_progress",children:"In Progress"}),e.jsx(c,{value:"resolved",children:"Resolved"})]})]})}),e.jsx(l,{className:"py-3 px-4 hidden xl:table-cell align-middle",children:new Date(s.created_at).toLocaleString()}),e.jsx(l,{className:"py-3 px-4 align-middle",children:e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(s.message),className:"text-indigo-600 hover:text-indigo-900",children:"Copy"})})]},s.id))})]})})]})}function M(){return e.jsx(w,{children:e.jsx(I,{})})}export{M as default};

import{r as d,y as c,j as e}from"./app-By9T3_hT.js";import{L}from"./Layout-B2cxh-r7.js";import{u as k,F as B,C as V}from"./index.esm-CfDLc69O.js";import{I as z,B as n}from"./index-BnX6mjkZ.js";import{C as H}from"./card-CSknuUnI.js";import{F as w,a as P,b as _,c as C,d as S}from"./form-D4nV-YtK.js";import{S as M,e as R,g as U,i as O,j as $}from"./select-T4vt2RfK.js";import{q as G,r as J,L as K,M as Q,O as W}from"./navbar-CwT8qYnT.js";import{T as X,a as Y,b as h,c as i,d as Z,e as l}from"./table-M1DGgy18.js";import{P as ee,T as se}from"./trash-BRhYlp0f.js";import"./label-CFASl-Vv.js";function re(){const g=k({defaultValues:{product_category_name:"",category_id:""}}),{control:m,handleSubmit:F,formState:{errors:f},reset:p}=g,[j,v]=d.useState([]),[y,E]=d.useState([]),[o,N]=d.useState(null);d.useEffect(()=>{T(),u()},[]);const T=async()=>{try{const s=await G();v(s||[])}catch(s){console.error("Error fetching categories:",s),c.error("Failed to load categories")}},u=async()=>{try{const s=await J();E(s||[])}catch(s){console.error("Error fetching product names:",s),c.error("Failed to load product names")}},I=async s=>{var r,t;try{const a={name:s.product_category_name.trim(),category_id:parseInt(s.category_id)};o?(await K(o.id,a),c.success("Product Name Updated Successfully!")):(await Q(a),c.success("Product Name Added Successfully!")),await u(),b()}catch(a){console.error("Error adding/updating product:",a),c.error(((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to add/update product")}},b=()=>{p({product_category_name:"",category_id:""}),N(null)},q=s=>{N(s),p({product_category_name:s.name,category_id:String(s.category_id)})},A=async s=>{var r,t;try{const a=await W(s);a.message?(c.success(`${a.message}`),await u()):c.error("Failed to delete product name")}catch(a){console.error("Error deleting product:",a),c.error(((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to delete product")}},D=()=>{b()};return e.jsxs("div",{className:"p-6 flex flex-col items-center w-full min-h-screen",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Product Names"}),e.jsxs(H,{className:"p-8 shadow-lg rounded-lg bg-white max-w-2xl w-full mb-8",children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4 text-gray-800",children:o?"Edit Product Name":"Add Product Name with Category"}),e.jsx(B,{...g,children:e.jsxs("form",{className:"space-y-6",onSubmit:F(I),children:[e.jsx(w,{control:m,name:"product_category_name",rules:{required:"Product name is required",minLength:{value:2,message:"Product name must be at least 2 characters"}},render:({field:s})=>{var r;return e.jsxs(P,{children:[e.jsx(_,{children:"Product Name"}),e.jsx(C,{children:e.jsx(z,{...s,className:"p-4 border border-gray-300 rounded-md w-full",placeholder:"Enter product name"})}),e.jsx(S,{children:(r=f.product_category_name)==null?void 0:r.message})]})}}),e.jsx(w,{control:m,name:"category_id",rules:{required:"Category is required"},render:({field:s})=>{var r;return e.jsxs(P,{children:[e.jsx(_,{children:"Category"}),e.jsx(C,{children:e.jsx(V,{name:"category_id",control:m,render:({field:{onChange:t,value:a}})=>e.jsxs(M,{onValueChange:t,value:a,children:[e.jsx(R,{className:"w-full",children:e.jsx(U,{placeholder:"Select a category"})}),e.jsx(O,{children:j.map(x=>e.jsx($,{value:String(x.id),children:x.name},x.id))})]})})}),e.jsx(S,{children:(r=f.category_id)==null?void 0:r.message})]})}}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(n,{type:"submit",className:"w-full sm:w-auto bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-6 rounded-md",children:o?"Update Product Name":"Add Product Name"}),o&&e.jsx(n,{type:"button",onClick:D,className:"w-full sm:w-auto bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-6 rounded-md",children:"Cancel"})]})]})})]}),e.jsx("div",{className:"w-full max-w-4xl",children:e.jsxs(X,{className:"w-full border rounded-lg",children:[e.jsx(Y,{children:e.jsxs(h,{className:"bg-gray-50",children:[e.jsx(i,{className:"text-center font-semibold",children:"ID"}),e.jsx(i,{className:"text-center font-semibold",children:"Product Name"}),e.jsx(i,{className:"text-center font-semibold",children:"Category"}),e.jsx(i,{className:"text-center font-semibold",children:"Actions"})]})}),e.jsx(Z,{children:y.length>0?y.map(s=>{var r;return e.jsxs(h,{className:"hover:bg-gray-100",children:[e.jsx(l,{className:"text-center",children:s.id}),e.jsx(l,{className:"text-center",children:s.name}),e.jsx(l,{className:"text-center",children:((r=j.find(t=>t.id===s.category_id))==null?void 0:r.name)||"N/A"}),e.jsx(l,{className:"text-center",children:e.jsxs("div",{className:"flex space-x-2 justify-center",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>q(s),className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"})," Edit"]}),e.jsxs(n,{variant:"destructive",size:"sm",onClick:()=>A(s.id),className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"})," Delete"]})]})})]},s.id)}):e.jsx(h,{children:e.jsx(l,{colSpan:4,className:"text-center py-4 text-gray-500",children:"No product names available"})})})]})})]})}function he(){return e.jsx(L,{children:e.jsx(re,{})})}export{he as default};

import{r as d,j as e,y as b}from"./app-BB_afIc-.js";import{C as _,a as I}from"./card-CL-H-AKy.js";import{T as B,a as F,b as h,c as o,d as T,e as l}from"./table-Dxlrwawi.js";import{B as q}from"./badge-DdflwINu.js";import{x as j,y as L}from"./navbar-ANKU7EsA.js";import{C as y,A as P,E as H,a as O,S as R}from"./react-icons.esm-CnRT4yFG.js";import{D as K,a as z,b as G,c as J,d as M}from"./dialog-DVLDIiCI.js";import{B as x,I as c}from"./index-BflTKMWf.js";import{L as i}from"./label-DFwdEFmo.js";import{L as Q}from"./Layout-CsiUY54X.js";function te({setActiveSection:V,setUserData:W}){const[g,N]=d.useState([]),[p,v]=d.useState(!0),[f,S]=d.useState(null),[w,m]=d.useState(!1),[a,C]=d.useState(null),[n,u]=d.useState({userId:"",basicSalary:"",allowances:"",deductions:"",panNumber:"",accountNumber:"",branch:"",ifsc_code:"",bankName:""});d.useEffect(()=>{(async()=>{try{const r=await j();N(r.salary||[])}catch(r){S(r.message)}finally{v(!1)}})()},[]);const A=s=>{C(s),u(r=>({...r,userId:s.id})),m(!0)},t=s=>{const{name:r,value:k}=s.target;u(E=>({...E,[r]:k}))},D=async s=>{s.preventDefault();try{await L(n),b.success("Salary details saved successfully!"),m(!1),u({userId:"",basicSalary:"",allowances:"",deductions:"",panNumber:"",accountNumber:"",branch:"",ifsc_code:"",bankName:""});const r=await j();N(r.salary||[])}catch{b.error("Failed to save salary details")}};return e.jsx(Q,{children:e.jsxs("div",{className:"p-6 min-h-screen",children:[e.jsx("div",{children:e.jsxs("h2",{className:"text-3xl font-bold flex items-center gap-2 text-indigo-800",children:[e.jsx(y,{className:"h-8 w-8 text-indigo-600"})," Salary Data"]})}),e.jsx("div",{className:"flex items-center justify-between mb-4"}),e.jsx(_,{className:"w-full shadow-lg rounded-xl bg-white overflow-hidden",children:e.jsx(I,{className:"p-5",children:e.jsx("div",{className:"p-6",children:f?e.jsxs(P,{variant:"destructive",className:"mb-6 bg-red-100 border border-red-400",children:[e.jsx(H,{className:"h-4 w-4 text-red-500"}),e.jsxs(O,{className:"text-red-700",children:["Error loading salaries: ",f]})]}):p?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((s,r)=>e.jsx(R,{className:"h-12 w-full rounded-lg bg-gray-200"},r))}):e.jsx("div",{className:"border rounded-lg overflow-auto shadow-lg",children:e.jsxs(B,{className:"w-full min-w-[600px] sm:w-full",children:[e.jsx(F,{className:"bg-indigo-100",children:e.jsxs(h,{children:[e.jsx(o,{className:"text-center text-indigo-800",children:"ID"}),e.jsx(o,{className:"text-center text-indigo-800",children:"Name"}),e.jsx(o,{className:"text-center text-indigo-800",children:"Salary"}),e.jsx(o,{className:"text-center text-indigo-800",children:"Account"}),e.jsx(o,{className:"text-center text-indigo-800",children:"BanK"}),e.jsx(o,{className:"text-center text-indigo-800",children:"Payment At"}),e.jsx(o,{className:"text-center text-indigo-800",children:"Actions"})]})}),e.jsx(T,{children:g.length>0?g.map(s=>e.jsxs(h,{className:"hover:bg-indigo-50 border-t",children:[e.jsx(l,{className:"text-center py-4",children:s.id}),e.jsx(l,{className:"text-center",children:e.jsxs(q,{variant:"outline",className:"text-indigo-600",children:[s.user_name||"N/A"," "]})}),e.jsx(l,{className:"text-center",children:s.amount||"N/A"}),e.jsx(l,{className:"text-center font-mono text-gray-600",children:s.account_number||"N/A"}),e.jsx(l,{className:"text-center text-sm text-gray-500",children:s.bank_name||"N/A"}),e.jsx(l,{className:"text-center text-sm text-gray-500",children:e.jsx(x,{className:s.status!==!1?"bg-red-500":"bg-green-500",children:s.status!==!1?"Pending":"Paid"})}),e.jsx(l,{className:"text-center",children:e.jsx(x,{onClick:()=>A(s),children:"Salary Details"})})]},s.id)):e.jsx(h,{children:e.jsxs(l,{colSpan:"6",className:"h-24 text-center text-gray-500",children:[e.jsx(y,{className:"h-8 w-8 text-gray-400"}),"No salaries found"]})})})]})})})})}),e.jsx(K,{open:w,onOpenChange:m,children:e.jsxs(z,{className:"sm:max-w-[600px]",children:[e.jsx(G,{children:e.jsxs(J,{className:"text-xl font-semibold text-indigo-800",children:["Add Salary for ",(a==null?void 0:a.user_name)||"User"]})}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(i,{htmlFor:"basicSalary",className:"text-sm font-medium text-gray-700",children:["Basic Salary ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{id:"basicSalary",name:"basicSalary",type:"number",value:n.basicSalary||(a==null?void 0:a.amount),onChange:t,placeholder:"Enter basic salary",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md",required:!0})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(i,{htmlFor:"allowances",className:"text-sm font-medium text-gray-700",children:"Allowances"}),e.jsx(c,{id:"allowances",name:"allowances",type:"number",value:n.allowances||(a==null?void 0:a.allowance),onChange:t,placeholder:"Enter allowances",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(i,{htmlFor:"deductions",className:"text-sm font-medium text-gray-700",children:"Deductions"}),e.jsx(c,{id:"deductions",name:"deductions",type:"number",value:n.deductions||(a==null?void 0:a.deduction),onChange:t,placeholder:"Enter deductions",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(i,{htmlFor:"panNumber",className:"text-sm font-medium text-gray-700",children:["PAN Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{id:"panNumber",name:"panNumber",type:"text",value:n.panNumber||(a==null?void 0:a.panNumber),onChange:t,className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(i,{htmlFor:"accountNumber",className:"text-sm font-medium text-gray-700",children:["Account Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{id:"accountNumber",name:"accountNumber",type:"text",value:n.accountNumber||(a==null?void 0:a.account_number),onChange:t,placeholder:"Enter Account Number",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md",required:!0})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(i,{htmlFor:"ifsc_code",className:"text-sm font-medium text-gray-700",children:["IFSC Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{id:"ifsc_code",name:"ifsc_code",type:"text",value:n.ifsc_code||(a==null?void 0:a.ifsc_code),onChange:t,placeholder:"Enter IFSC",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md",required:!0})]})]}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(i,{htmlFor:"bankName",className:"text-sm font-medium text-gray-700",children:["Bank Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{id:"bankName",name:"bankName",type:"text",value:n.bankName||(a==null?void 0:a.bank_name),onChange:t,placeholder:"Enter Bank",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md",required:!0})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(i,{htmlFor:"branch",className:"text-sm font-medium text-gray-700",children:["Branch ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{id:"branch",name:"branch",type:"text",value:n.branch||(a==null?void 0:a.branch),onChange:t,placeholder:"Enter Branch",className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md",required:!0})]})]})]}),e.jsxs(M,{className:"flex justify-end space-x-2",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>m(!1),className:"border-gray-300 text-gray-700 hover:bg-gray-100",children:"Cancel"}),e.jsx(x,{type:"submit",className:"bg-indigo-600 text-white hover:bg-indigo-700",children:"Save Salary"})]})]})]})})]})})}export{te as default};

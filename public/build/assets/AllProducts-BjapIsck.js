import{r as s,j as e,y as p}from"./app-By9T3_hT.js";import{C as q,a as F}from"./card-CSknuUnI.js";import{T as O,a as V,b as m,c as d,d as $,e as l}from"./table-M1DGgy18.js";import{B as H}from"./badge-hluCmU2h.js";import{w as Q,C as R}from"./navbar-CwT8qYnT.js";import{C as z,A as M,E as W,a as G,S as J}from"./react-icons.esm-DL-rYN1D.js";import{I as K,c as U,B as v}from"./index-BnX6mjkZ.js";import{D as X,b as Y,c as Z,d as ee,e as ae}from"./dialog-CPdFLB40.js";import{S as y,e as h,g as b,i as k,j as o}from"./select-T4vt2RfK.js";import{L as re}from"./Layout-B2cxh-r7.js";function te({setActiveSection:se,setproductData:le}){const[u,j]=s.useState([]),[S,C]=s.useState(!0),[f,A]=s.useState(null),[n,N]=s.useState(null),[D,c]=s.useState(!1),[i,I]=s.useState("All"),[g,P]=s.useState("All"),[x,L]=s.useState("");s.useEffect(()=>{(async()=>{try{const r=await Q();j(r)}catch(r){A(r.message)}finally{C(!1)}})()},[]);const T=(a,r)=>{a==="delete"?(N(r),c(!0)):a==="edit"&&(window.location.href=`product/${r.id}`)},E=async()=>{var a,r;try{await R(n.id),j(t=>t.filter(B=>B.id!==n.id)),p.success("Product deleted successfully!")}catch(t){console.error("Error deleting product:",((r=(a=t.response)==null?void 0:a.data)==null?void 0:r.message)||t.message),p.error("Failed to delete product.")}finally{c(!1),N(null)}},w=()=>{let a=[...u];if(i!=="All"&&(a=a.filter(r=>r.category===i)),g!=="All"&&(a=a.filter(r=>g==="In Stock"?r.stock_quantity>0:r.stock_quantity===0)),x){const r=x.toLowerCase();a=a.filter(t=>t.productName.toLowerCase().includes(r)||t.companyName&&t.companyName.toLowerCase().includes(r)||t.shop_name&&t.shop_name.toLowerCase().includes(r))}return a},_=["All",...new Set(u.map(a=>a.category))];return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 bg-gray-100 dark:bg-gray-900 min-h-screen",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[e.jsx(z,{className:"h-6 w-6 sm:h-8 sm:w-8 text-indigo-600 dark:text-indigo-400"}),"Product Inventory"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{type:"text",value:x,onChange:a=>L(a.target.value),placeholder:"Search by name, company, or branch...",className:"w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 pl-10"}),e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 block",children:"Category"}),e.jsxs(y,{value:i,onValueChange:I,children:[e.jsx(h,{className:"w-full sm:w-[200px] rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100",children:e.jsx(b,{placeholder:"All Categories"})}),e.jsx(k,{className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600",children:_.map(a=>e.jsx(o,{value:a,className:"text-gray-800 dark:text-gray-100 hover:bg-indigo-100 dark:hover:bg-gray-600",children:a},a))})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 block",children:"Stock Status"}),e.jsxs(y,{value:g,onValueChange:P,children:[e.jsx(h,{className:"w-full sm:w-[200px] rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100",children:e.jsx(b,{placeholder:"All"})}),e.jsxs(k,{className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600",children:[e.jsx(o,{value:"All",className:"text-gray-800 dark:text-gray-100 hover:bg-indigo-100 dark:hover:bg-gray-600",children:"All"}),e.jsx(o,{value:"In Stock",className:"text-gray-800 dark:text-gray-100 hover:bg-indigo-100 dark:hover:bg-gray-600",children:"In Stock"}),e.jsx(o,{value:"Out of Stock",className:"text-gray-800 dark:text-gray-100 hover:bg-indigo-100 dark:hover:bg-gray-600",children:"Out of Stock"})]})]})]})]}),e.jsx(q,{className:"w-full shadow-md rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx(F,{className:"p-4 sm:p-6",children:f?e.jsxs(M,{variant:"destructive",className:"mb-6",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs(G,{children:["Error loading products: ",f]})]}):S?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((a,r)=>e.jsx(J,{className:"h-12 w-full rounded-md"},r))}):e.jsxs(O,{className:"w-full",children:[e.jsx(V,{children:e.jsxs(m,{className:"bg-gray-50 dark:bg-gray-700",children:[e.jsx(d,{className:"text-gray-700 dark:text-gray-200",children:"Product Name"}),e.jsx(d,{className:"text-gray-700 dark:text-gray-200",children:"Category"}),e.jsx(d,{className:"text-gray-700 dark:text-gray-200",children:"Price"}),e.jsx(d,{className:"text-gray-700 dark:text-gray-200",children:"Stock"}),e.jsx(d,{className:"text-gray-700 dark:text-gray-200",children:"Source"}),e.jsx(d,{className:"text-gray-700 dark:text-gray-200",children:"Actions"})]})}),e.jsx($,{children:w().length>0?w().map(a=>e.jsxs(m,{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[e.jsx(l,{className:"text-gray-800 dark:text-gray-100",children:a.productName}),e.jsx(l,{className:"text-gray-600 dark:text-gray-400",children:a.category}),e.jsxs(l,{className:"text-gray-800 dark:text-gray-100",children:["â‚¹",a.price]}),e.jsx(l,{children:e.jsx(H,{className:U("px-2 py-1 text-xs font-medium",a.stock_quantity>0?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"),children:a.stock_quantity>0?`In Stock (${a.stock_quantity})`:"Out of Stock"})}),e.jsx(l,{className:"text-gray-600 dark:text-gray-400",children:a!=null&&a.companyName?`Company: ${a.companyName}`:`Branch: ${(a==null?void 0:a.shop_name)||"N/A"}`}),e.jsx(l,{children:e.jsxs(y,{onValueChange:r=>T(r,a),children:[e.jsx(h,{className:"w-[120px] sm:w-[140px] rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100",children:e.jsx(b,{placeholder:"Actions"})}),e.jsxs(k,{className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600",children:[e.jsx(o,{value:"edit",className:"text-gray-800 dark:text-gray-100 hover:bg-indigo-100 dark:hover:bg-gray-600",children:"Edit"}),e.jsx(o,{value:"delete",className:"text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-600",children:"Delete"})]})]})})]},a.id)):e.jsx(m,{children:e.jsx(l,{colSpan:"6",className:"text-center text-gray-500 dark:text-gray-400 py-6",children:"No products found"})})})]})})}),e.jsx(X,{open:D,onOpenChange:c,children:e.jsxs(Y,{className:"sm:max-w-md bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx(Z,{children:e.jsx(ee,{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Confirm Deletion"})}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Are you sure you want to delete ",e.jsx("span",{className:"font-medium",children:n==null?void 0:n.productName}),"?"]}),e.jsxs(ae,{className:"mt-4",children:[e.jsx(v,{onClick:()=>c(!1),variant:"outline",className:"text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx(v,{onClick:E,className:"bg-red-600 text-white hover:bg-red-700 rounded-md shadow-md transition-colors duration-200",children:"Delete"})]})]})})]})}function be(){return e.jsx(re,{children:e.jsx(te,{})})}export{be as default};
